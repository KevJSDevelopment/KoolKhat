(this["webpackJsonpchat-frontend"]=this["webpackJsonpchat-frontend"]||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),s=n.n(r),c=n(11),o=n.n(c),i=(n(96),n(83)),l=n(162),d=(n(97),n(55)),b=n(13),j=n(62),u=n(12),h=n(29),p=n.n(h),m=n(44),g=n(22),x=n(38),O=(n(99),n(146)),f=n(161),y=n(149),w=n(111),v=n(163),k=n(152),S=n(77),C=n.n(S),F=n(63),N=n.n(F),I=Object(O.a)((function(e){return{paper:{color:"white",backgroundColor:"#20b5a2",maxWidth:"100%",width:"fit-content",display:"inlineBlock"},text:{paddingLeft:"8px",paddingRight:"8px"}}})),L=function(e){var t=I();return Object(a.jsx)("div",{children:e.currentUser.username!==e.user.username?Object(a.jsxs)(y.a,{container:!0,item:!0,direction:"row",xs:12,style:{marginBottom:"1%"},children:[Object(a.jsx)(y.a,{item:!0,xs:0,style:{margin:5,marginLeft:"2%",marginRight:0,padding:0},children:Object(a.jsx)(N.a,{style:{fill:e.user.icon,backgroundColor:e.user.background,borderRadius:"15px"}})}),Object(a.jsxs)(y.a,{item:!0,xs:5,style:{margin:5,marginLeft:10,padding:0},children:[Object(a.jsx)(w.a,{className:t.paper,elevation:3,style:{backgroundColor:"#546e7a"},children:Object(a.jsx)("div",{className:t.text,children:e.message.text})}),Object(a.jsx)(d.a,{variant:"subtitle2",style:{float:"left",font:"5",color:"#2bbd7e"},children:e.user.username})]})]}):Object(a.jsxs)(y.a,{container:!0,item:!0,direction:"row",xs:12,style:{marginBottom:"1%",marginLeft:"51%"},children:[Object(a.jsxs)(y.a,{item:!0,xs:5,style:{margin:5,marginLeft:10,padding:0},children:[Object(a.jsx)(w.a,{className:t.paper,elevation:3,style:{float:"right"},children:Object(a.jsx)("div",{className:t.text,children:e.message.text})}),Object(a.jsx)("br",{}),Object(a.jsx)(d.a,{variant:"subtitle2",style:{float:"right",font:"5",color:"#2bbd7e"},children:e.user.username})]}),Object(a.jsx)(y.a,{item:!0,xs:0,style:{margin:5,marginLeft:"2%",marginRight:0,padding:0},children:Object(a.jsx)(N.a,{style:{fill:e.user.icon,backgroundColor:e.user.background,borderRadius:"15px"}})})]})})},T=Object(O.a)((function(e){return{label:{color:"white"},focusedLabel:{color:"#2bbd7e"},text:{color:"#FFFFFF"}}})),R=function(e){var t=T(),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){n.current.scrollIntoView({behavior:"smooth"})}),[e.messages]),Object(a.jsxs)(y.a,{container:!0,item:!0,direction:"row",alignItems:"top",xs:12,className:e.classes.chatSpace,children:[Object(a.jsx)(y.a,{item:!0,xs:12,children:Object(a.jsx)(d.a,{variant:"h4",style:{textAlign:"center",color:"#FFFFFF"},children:Object(a.jsxs)("i",{children:[" ",e.channel.name," "]})})}),Object(a.jsx)(y.a,{item:!0,xs:12,children:Object(a.jsxs)(w.a,{elevation:15,className:e.classes.paper,style:{height:window.innerHeight/1.5,overflowY:"auto",overflowX:"hidden"},children:[e.messages.sort((function(e,t){return e.data.id-t.data.id})).map((function(t){return Object(a.jsx)(L,{message:t.data,user:t.user,currentUser:e.currentUser},t.data.id)})),Object(a.jsx)("div",{ref:n})]})}),Object(a.jsx)(y.a,{item:!0,xs:12,children:Object(a.jsx)(w.a,{elevation:15,className:e.classes.paper,style:{float:"center",width:"auto"},children:Object(a.jsxs)("form",{autoComplete:"off",className:e.classes.form,onSubmit:function(t){t.preventDefault(),""==!t.target[0].value&&(e.makeMessage(t.target[0].value),t.currentTarget.reset())},children:[Object(a.jsx)(v.a,{placeholder:"",id:"outlined-basic",label:"Send Message",variant:"outlined",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}},InputProps:{className:t.text},style:{color:"white",width:"94%"}}),Object(a.jsx)(k.a,{type:"submit",color:"secondary","aria-label":"send",style:{align:"center"},children:Object(a.jsx)(C.a,{fontSize:"large",style:{fill:"#2bbd7e"}})})]})})})]})},B=n(10),P=n(4),U=n(19),K=n(165),z=n(154),J=n(155),A=n(151),H=n(153),W=n(157),D=n(156),M=n(78),V=n.n(M),E=n(80),_=n.n(E),G=n(79),X=n.n(G),Y=n(158),q=n(159),Q=n(160),Z=n(64),$=n.n(Z),ee=n(81),te=n.n(ee),ne=n.p+"static/media/Logo.bb2c4dae.png",ae=n(82),re=n.n(ae),se=180,ce=Object(O.a)((function(e){var t;return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#29434e",color:"#FFFFFF"},appBarShift:{marginLeft:se,width:"calc(100% - ".concat(se,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36,"&:hover":{color:"white"}},hide:{display:"none",color:"white"},drawer:{width:se,flexShrink:0,whiteSpace:"nowrap",backgroundColor:"#546e7a",color:"white"},drawerOpen:{width:se,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),backgroundColor:"#546e7a",color:"white"},drawerClose:(t={transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},Object(B.a)(t,e.breakpoints.up("sm"),{width:e.spacing(9)+1}),Object(B.a)(t,"backgroundColor","#546e7a"),Object(B.a)(t,"color","white"),t),list:{color:"white","&:hover":{color:"#29434e"}},login:{color:"#FFFFFF",backgroundColor:"#29434e","&:hover":{backgroundColor:"#2bbd7e"}}}})),oe=function(e){var t,n,r=ce(),c=Object(U.a)(),o=s.a.useState(!1),i=Object(b.a)(o,2),l=i[0],j=i[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(H.a,{}),Object(a.jsx)(z.a,{position:"fixed",className:Object(P.a)(r.appBar,Object(B.a)({},r.appBarShift,l)),style:{},children:Object(a.jsxs)(J.a,{style:{justifyContent:"space-between"},children:[Object(a.jsx)(k.a,{color:"inherit","aria-label":"open drawer",onClick:function(){j(!0)},edge:"start",className:Object(P.a)(r.menuButton,Object(B.a)({},r.hide,l)),children:Object(a.jsx)(V.a,{})}),Object(a.jsx)(y.a,{container:!0,direction:"column",xs:5,children:Object(a.jsxs)(y.a,{item:!0,xs:3,style:l?{marginLeft:"0"}:{marginLeft:"40%"},children:[Object(a.jsx)(d.a,{variant:"inherit",style:{float:"left",fontSize:"18px",color:"#2bbd7e"},children:Object(a.jsx)("i",{children:"Kool"})}),Object(a.jsx)("img",{src:ne,style:{width:"40%"},alt:"logo"}),Object(a.jsx)(d.a,{variant:"inherit",style:{fontSize:"18px",color:"#9bffff"},children:Object(a.jsx)("i",{children:"Khat"})})]})}),Object(a.jsx)(D.a,{onClick:e.handleLogout,className:r.login,children:"logout"})]})}),Object(a.jsxs)(K.a,{variant:"permanent",className:Object(P.a)(r.drawer,(t={},Object(B.a)(t,r.drawerOpen,l),Object(B.a)(t,r.drawerClose,!l),t)),classes:{paper:Object(P.a)((n={},Object(B.a)(n,r.drawerOpen,l),Object(B.a)(n,r.drawerClose,!l),n))},children:[Object(a.jsx)("div",{className:r.toolbar,children:Object(a.jsx)(k.a,{onClick:function(){j(!1)},children:"rtl"===c.direction?Object(a.jsx)(X.a,{style:{color:"white"}}):Object(a.jsx)(_.a,{style:{color:"white"}})})}),Object(a.jsx)(W.a,{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(W.a,{}),Object(a.jsx)("div",{style:{textAlign:"center",backgroundColor:"#29434e"},children:"Friends"}),Object(a.jsx)(W.a,{}),Object(a.jsx)(A.a,{children:["All mail","Trash","Spam"].map((function(e,t){return Object(a.jsxs)(Y.a,{button:!0,children:[Object(a.jsx)(q.a,{className:r.list,children:t%2===0?Object(a.jsx)($.a,{}):Object(a.jsx)(te.a,{})}),Object(a.jsx)(Q.a,{primary:e})]},e)}))}),Object(a.jsx)(W.a,{}),Object(a.jsx)("div",{style:{textAlign:"center",backgroundColor:"#29434e"},children:"Rooms"}),Object(a.jsx)(W.a,{}),Object(a.jsxs)(A.a,{style:{overflow:"auto",height:"35%"},children:[Object(a.jsxs)(Y.a,{button:!0,onClick:function(){return e.handleNewChannelOpen()},children:[Object(a.jsx)(q.a,{children:Object(a.jsx)(re.a,{})}),Object(a.jsx)(Q.a,{primary:"New Room"})]}),e.channels.map((function(t){return Object(a.jsxs)(Y.a,{button:!0,onClick:function(){return e.setChannel(t)},children:[Object(a.jsx)(q.a,{className:r.list,children:Object(a.jsx)($.a,{})}),Object(a.jsx)(Q.a,{primary:t.name})]},t.name)}))]}),Object(a.jsx)(W.a,{}),Object(a.jsx)("div",{style:{textAlign:"center",backgroundColor:"#29434e"},children:"Settings"}),Object(a.jsx)(W.a,{})]})]})},ie=n(164),le=n.p+"static/media/loginbackground.47009031.png",de=Object(O.a)((function(e){return{label:{color:"black",width:"100%"},focusedLabel:{color:"black"},modal:{width:"30%",maxWidth:"100vw",maxHeight:"100%",position:"fixed",top:"25%",left:"35%",overflow:"auto",height:"50%",background:"whitesmoke",backgroundImage:"url(".concat(le,")"),backgroundSize:"auto",border:"3px solid white"}}})),be=function(e){var t=de();return Object(a.jsx)("div",{className:t.modal,children:Object(a.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){e.createNewChannel(t)},children:Object(a.jsxs)(y.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(y.a,{container:!0,item:!0,xs:12,style:{margin:"1%"},direction:"row",children:Object(a.jsx)("img",{src:ne,style:{width:"20%",marginLeft:"17px"},alt:"logo"})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(v.a,{placeholder:"",id:"standard-basic",label:"Room Name",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"3%",padding:"10px",paddingTop:"0"},children:Object(a.jsx)(D.a,{type:"submit",style:{background:"#2bbd7e"},children:"Make ChatRoom"})})]})})})},je=Object(i.a)({palette:{primary:{main:"#000000"},secondary:{main:"#000000"}}}),ue=Object(O.a)((function(e){return{root:{background:"#819ca9",margin:0,padding:0,border:0,maxHeight:"100%",height:window.innerHeight,flexGrow:1,display:"flex"},paper:{background:"#29434e",margin:5,padding:0,border:0},container:{width:"full",margin:0,padding:10,paddingLeft:20,paddingRight:20,border:0,align:"center"},form:{align:"center"},info:{background:"#819ca9"},chatSpace:{background:"#819ca9"},toolbar:Object(x.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}})),he=function(e){var t="wss://stormy-savannah-56656.herokuapp.com/cable",n=ue(),s=Object(r.useState)([]),c=Object(b.a)(s,2),o=c[0],i=c[1],d=Object(r.useState)({channel:{},messages:[]}),j=Object(b.a)(d,2),u=j[0],h=j[1],O=function(e,t){var n=new WebSocket(e);return n.onopen=function(e){var a={id:t,channel:"ChannelChannel"},r=JSON.stringify({command:"subscribe",identifier:JSON.stringify(a)});n.send(r)},n},w=Object(r.useState)(!1),v=Object(b.a)(w,2),k=v[0],S=v[1],C=function(){S(!1)},F=function(e){var t=e.data,n=JSON.parse(t);"ping"!==n.type&&n.message&&h((function(e){return Object(x.a)(Object(x.a)({},e),{},{messages:[].concat(Object(g.a)(e.messages),[n.message.message_info])})}))},N=function(){var t=Object(m.a)(p.a.mark((function t(){var n,a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authentication:"Bearer ".concat(localStorage.getItem("token"))}},t.next=3,fetch("https://stormy-savannah-56656.herokuapp.com/login/user",n);case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,e.setCurrentUser(r.user);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://stormy-savannah-56656.herokuapp.com/channels/".concat(localStorage.getItem("channelId")));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,h((function(e){return Object(x.a)(Object(x.a)({},e),{},{channel:n.channel,messages:n.message_info})}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){localStorage.getItem("token")&&N(),function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:console.log("ran");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),fetch("https://stormy-savannah-56656.herokuapp.com/channels").then((function(e){return e.json()})).then((function(e){i(e)}));var e=[1,2];e.map((function(n){return localStorage.setItem("channelId",e[0]),O(t,n).onmessage=function(e){F(e)},e}))}),[]),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(oe,{handleNewChannelOpen:function(){S(!0)},handleLogout:function(){localStorage.removeItem("token"),e.setCurrentUser(null),e.setToken(!1)},channels:o,setChannel:function(e){O(t,e.id).onmessage=function(e){F(e)},localStorage.setItem("channelId",e.id),I()}}),Object(a.jsxs)("main",{className:n.content,children:[Object(a.jsx)("div",{className:n.toolbar}),Object(a.jsx)(f.a,{className:n.container,maxWidth:"xl",children:Object(a.jsx)(y.a,{container:!0,direction:"row",children:Object(a.jsx)(R,{classes:n,makeMessage:function(e){localStorage.getItem("token")?fetch("https://stormy-savannah-56656.herokuapp.com/messages",{method:"POST",headers:{"Content-Type":"application/json",Authentication:"bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({message:e,channel_id:localStorage.getItem("channelId")})}):alert("you need to sign in")},messages:u.messages,currentUser:e.currentUser,channel:u.channel})})})]}),Object(a.jsx)(ie.a,{open:k,onClose:C,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)(l.a,{theme:je,children:Object(a.jsx)(be,{createNewChannel:function(e){e.preventDefault(),fetch("https://stormy-savannah-56656.herokuapp.com/channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.target[0].value})}).then((function(e){return e.json()})).then(function(){var e=Object(m.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("failed"!==n){e.next=4;break}alert("Could not create channel"),e.next=11;break;case 4:return O(t,n.id).onmessage=function(e){F(e)},e.next=8,i((function(e){return[].concat(Object(g.a)(e),[n])}));case 8:localStorage.setItem("channelId",n.id),I(),C();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})})})]})},pe=Object(O.a)((function(e){return{label:{color:"black",width:"100%"},focusedLabel:{color:"black"},button:{"&:hover":{backgroundColor:"#2bbd7e",color:"white"}}}})),me=function(e){var t=pe();return Object(a.jsx)("div",{className:e.classes.modal,style:{borderRadius:"10%"},children:Object(a.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){e.login(t)},children:Object(a.jsxs)(y.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(y.a,{container:!0,item:!0,xs:12,style:{margin:"1%"},direction:"row",children:Object(a.jsx)("img",{src:ne,style:{width:"20%",marginLeft:"17px"},alt:"logo"})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(v.a,{placeholder:"",id:"standard-basic",label:"Username",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(v.a,{id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"3%",padding:"10px",paddingTop:"0"},children:Object(a.jsx)(D.a,{type:"submit",className:t.button,children:"Login"})})]})})})},ge=Object(O.a)((function(e){return{label:{color:"black",width:"100%"},focusedLabel:{color:"#22d5db"},button:{"&:hover":{backgroundColor:"#22d5db",color:"black"}}}})),xe=function(e){var t=ge();return Object(a.jsx)("div",{className:e.classes.modal,style:{borderRadius:"10%"},children:Object(a.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){e.signup(t)},children:Object(a.jsxs)(y.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(y.a,{container:!0,item:!0,xs:12,style:{margin:"1%"},direction:"row",children:Object(a.jsx)("img",{src:ne,style:{width:"20%",marginLeft:"17px"},alt:"logo"})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(v.a,{placeholder:"",id:"standard-basic",label:"Username",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(v.a,{id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(y.a,{item:!0,xs:12,style:{margin:"3%",padding:"10px",paddingTop:"0"},children:Object(a.jsx)(D.a,{type:"submit",className:t.button,children:"Signup"})})]})})})},Oe=Object(i.a)({palette:{primary:{main:"#000000"},secondary:{main:"#000000"}}}),fe=Object(O.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#29434e",color:"#FFFFFF"},list:{color:"white","&:hover":{color:"#29434e"}},login:{color:"#FFFFFF",backgroundColor:"#29434e","&:hover":{backgroundColor:"#2bbd7e"}},signUp:{color:"#FFFFFF",backgroundColor:"#29434e","&:hover":{backgroundColor:"#22d5db",color:"black"}},modal:{width:"30%",maxWidth:"100vw",maxHeight:"100%",position:"fixed",top:"25%",left:"35%",overflow:"auto",height:"50%",background:"whitesmoke",backgroundImage:"url(".concat(le,")"),backgroundSize:"auto",border:"3px solid white"}}})),ye=function(e){var t=fe(),n=Object(r.useState)(!1),s=Object(b.a)(n,2),c=s[0],o=s[1],i=Object(r.useState)(!1),j=Object(b.a)(i,2),u=j[0],h=j[1],p=function(){o(!1)},m=function(){h(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(z.a,{position:"fixed",className:Object(P.a)(t.appBar),children:Object(a.jsxs)(J.a,{style:{justifyContent:"space-between"},children:[Object(a.jsx)(y.a,{container:!0,xs:5,direction:"row",children:Object(a.jsxs)(y.a,{item:!0,xs:3,direction:"column",children:[Object(a.jsx)(d.a,{variant:"inherit",style:{float:"left",fontSize:"18px",color:"#2bbd7e"},children:Object(a.jsx)("i",{children:"Kool"})}),Object(a.jsx)("img",{src:ne,style:{width:"40%"},alt:"logo"}),Object(a.jsx)(d.a,{variant:"inherit",style:{fontSize:"18px",color:"#9bffff"},children:Object(a.jsx)("i",{children:"Khat"})})]})}),Object(a.jsxs)(y.a,{item:!0,children:[Object(a.jsx)(D.a,{onClick:function(){h(!0)},className:t.signUp,children:"Sign up"}),Object(a.jsx)(D.a,{onClick:function(){o(!0)},className:t.login,children:"Login"})]})]})}),Object(a.jsx)(ie.a,{open:c,onClose:p,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)(l.a,{theme:Oe,children:Object(a.jsx)(me,{classes:t,login:e.login,handleLoginClose:p})})}),Object(a.jsx)(ie.a,{open:u,onClose:m,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)(l.a,{theme:Oe,children:Object(a.jsx)(xe,{classes:t,signup:e.signup,handleSignupClose:m})})})]})},we=function(){var e=Object(r.useState)(localStorage.getItem("token")),t=Object(b.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)(null),o=Object(b.a)(c,2),i=o[0],l=o[1],d=function(e){e.preventDefault(),fetch("https://stormy-savannah-56656.herokuapp.com/login/".concat(e.target[0].value),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.target[0].value,password:e.target[1].value})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),l(e.user),s(localStorage.getItem("token"))}))},h=function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.target[0].value,password:e.target[1].value})};fetch("https://stormy-savannah-56656.herokuapp.com/users",t).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("token",e.token),l(e.user),s(localStorage.getItem("token"))}))},p=function(e){s(e)};return Object(a.jsx)(j.a,{children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{exact:!0,path:"/KoolKhat/",render:function(){return n?Object(a.jsx)(u.a,{to:"/KoolKhat/khat"}):Object(a.jsx)(ye,{setToken:p,login:d,signup:h})}}),Object(a.jsx)(u.b,{exact:!0,path:"/KoolKhat/khat",render:function(){return n?Object(a.jsx)(he,{setToken:p,currentUser:i,setCurrentUser:l}):Object(a.jsx)(u.a,{to:"/KoolKhat/"})}})]})})},ve=Object(i.a)({typography:{h3:{textAlign:"center"}},palette:{primary:{main:"#2bbd7e"},secondary:{main:"#9fffe0"}},fontFamily:"roboto"});o.a.render(Object(a.jsxs)(l.a,{theme:ve,children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(we,{}),Object(a.jsx)(d.a,{})]}),document.getElementById("root"))},96:function(e,t,n){},99:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.59590a28.chunk.js.map