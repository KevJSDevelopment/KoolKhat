(this["webpackJsonpchat-frontend"]=this["webpackJsonpchat-frontend"]||[]).push([[0],{100:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),s=n(11),o=n.n(s),i=n(83),l=n.n(i),d=(n(97),n(84)),b=n(166),j=(n(98),n(55)),u=n(13),h=n(62),p=n(12),m=n(29),g=n.n(m),x=n(44),O=n(22),f=n(38),y=(n(100),n(150)),w=n(165),v=n(153),k=n(115),S=n(167),C=n(156),F=n(77),N=n.n(F),I=n(63),L=n.n(I),T=Object(y.a)((function(e){return{paper:{color:"white",backgroundColor:"#20b5a2",maxWidth:"100%",width:"fit-content",display:"inlineBlock"},text:{paddingLeft:"8px",paddingRight:"8px"}}})),R=function(e){var t=T();return Object(a.jsx)("div",{children:e.currentUser.username!==e.user.username?Object(a.jsxs)(v.a,{container:!0,item:!0,direction:"row",xs:12,style:{marginBottom:"1%"},children:[Object(a.jsx)(v.a,{item:!0,xs:0,style:{margin:5,marginLeft:"2%",marginRight:0,padding:0},children:Object(a.jsx)(L.a,{style:{fill:e.user.icon,backgroundColor:e.user.background,borderRadius:"15px"}})}),Object(a.jsxs)(v.a,{item:!0,xs:5,style:{margin:5,marginLeft:10,padding:0},children:[Object(a.jsx)(k.a,{className:t.paper,elevation:3,style:{backgroundColor:"#546e7a"},children:Object(a.jsx)("div",{className:t.text,children:e.message.text})}),Object(a.jsx)(j.a,{variant:"subtitle2",style:{float:"left",font:"5",color:"#2bbd7e"},children:e.user.username})]})]}):Object(a.jsxs)(v.a,{container:!0,item:!0,direction:"row",xs:12,style:{marginBottom:"1%",marginLeft:"51%"},children:[Object(a.jsxs)(v.a,{item:!0,xs:5,style:{margin:5,marginLeft:10,padding:0},children:[Object(a.jsx)(k.a,{className:t.paper,elevation:3,style:{float:"right"},children:Object(a.jsx)("div",{className:t.text,children:e.message.text})}),Object(a.jsx)("br",{}),Object(a.jsx)(j.a,{variant:"subtitle2",style:{float:"right",font:"5",color:"#2bbd7e"},children:e.user.username})]}),Object(a.jsx)(v.a,{item:!0,xs:0,style:{margin:5,marginLeft:"2%",marginRight:0,padding:0},children:Object(a.jsx)(L.a,{style:{fill:e.user.icon,backgroundColor:e.user.background,borderRadius:"15px"}})})]})})},B=Object(y.a)((function(e){return{label:{color:"white"},focusedLabel:{color:"#2bbd7e"},text:{color:"#FFFFFF"}}})),P=function(e){var t=B(),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){n.current.scrollIntoView({behavior:"smooth"})}),[e.messages]),Object(a.jsxs)(v.a,{container:!0,item:!0,direction:"row",alignItems:"top",xs:12,className:e.classes.chatSpace,children:[Object(a.jsx)(v.a,{item:!0,xs:12,children:Object(a.jsx)(j.a,{variant:"h4",style:{textAlign:"center",color:"#FFFFFF"},children:Object(a.jsxs)("i",{children:[" ",e.channel.name," "]})})}),Object(a.jsx)(v.a,{item:!0,xs:12,children:Object(a.jsxs)(k.a,{elevation:15,className:e.classes.paper,style:{height:window.innerHeight/1.5,overflowY:"auto",overflowX:"hidden"},children:[e.messages.sort((function(e,t){return e.data.id-t.data.id})).map((function(t){return Object(a.jsx)(R,{message:t.data,user:t.user,currentUser:e.currentUser},t.data.id)})),Object(a.jsx)("div",{ref:n})]})}),Object(a.jsx)(v.a,{item:!0,xs:12,children:Object(a.jsx)(k.a,{elevation:15,className:e.classes.paper,style:{float:"center",width:"auto"},children:Object(a.jsxs)("form",{autoComplete:"off",className:e.classes.form,onSubmit:function(t){t.preventDefault(),""==!t.target[0].value&&(e.makeMessage(t.target[0].value),t.currentTarget.reset())},children:[Object(a.jsx)(S.a,{placeholder:"",id:"outlined-basic",label:"Send Message",variant:"outlined",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}},InputProps:{className:t.text},style:{color:"white",width:"94%"}}),Object(a.jsx)(C.a,{type:"submit",color:"secondary","aria-label":"send",style:{align:"center"},children:Object(a.jsx)(N.a,{fontSize:"large",style:{fill:"#2bbd7e"}})})]})})})]})},U=n(10),z=n(4),J=n(20),A=n(169),K=n(158),H=n(159),W=n(155),D=n(157),M=n(161),V=n(160),E=n(78),_=n.n(E),G=n(80),X=n.n(G),Y=n(79),q=n.n(Y),Q=n(162),Z=n(163),$=n(164),ee=n(64),te=n.n(ee),ne=n(81),ae=n.n(ne),re=n.p+"static/media/Logo.bb2c4dae.png",ce=n(82),se=n.n(ce),oe=180,ie=Object(y.a)((function(e){var t;return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#29434e",color:"#FFFFFF"},appBarShift:{marginLeft:oe,width:"calc(100% - ".concat(oe,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36,"&:hover":{color:"white"}},hide:{display:"none",color:"white"},drawer:{width:oe,flexShrink:0,whiteSpace:"nowrap",backgroundColor:"#546e7a",color:"white"},drawerOpen:{width:oe,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),backgroundColor:"#546e7a",color:"white"},drawerClose:(t={transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},Object(U.a)(t,e.breakpoints.up("sm"),{width:e.spacing(9)+1}),Object(U.a)(t,"backgroundColor","#546e7a"),Object(U.a)(t,"color","white"),t),list:{color:"white","&:hover":{color:"#29434e"}},login:{color:"#FFFFFF",backgroundColor:"#29434e","&:hover":{backgroundColor:"#2bbd7e"}}}})),le=function(e){var t,n,r=ie(),s=Object(J.a)(),o=c.a.useState(!1),i=Object(u.a)(o,2),l=i[0],d=i[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)(D.a,{}),Object(a.jsx)(K.a,{position:"fixed",className:Object(z.a)(r.appBar,Object(U.a)({},r.appBarShift,l)),style:{},children:Object(a.jsxs)(H.a,{style:{justifyContent:"space-between"},children:[Object(a.jsx)(C.a,{color:"inherit","aria-label":"open drawer",onClick:function(){d(!0)},edge:"start",className:Object(z.a)(r.menuButton,Object(U.a)({},r.hide,l)),children:Object(a.jsx)(_.a,{})}),Object(a.jsx)(v.a,{container:!0,direction:"column",xs:5,children:Object(a.jsxs)(v.a,{item:!0,xs:3,style:l?{marginLeft:"0"}:{marginLeft:"40%"},children:[Object(a.jsx)(j.a,{variant:"inherit",style:{float:"left",fontSize:"18px",color:"#2bbd7e"},children:Object(a.jsx)("i",{children:"Kool"})}),Object(a.jsx)("img",{src:re,style:{width:"40%"},alt:"logo"}),Object(a.jsx)(j.a,{variant:"inherit",style:{fontSize:"18px",color:"#9bffff"},children:Object(a.jsx)("i",{children:"Khat"})})]})}),Object(a.jsx)(V.a,{onClick:e.handleLogout,className:r.login,children:"logout"})]})}),Object(a.jsxs)(A.a,{variant:"permanent",className:Object(z.a)(r.drawer,(t={},Object(U.a)(t,r.drawerOpen,l),Object(U.a)(t,r.drawerClose,!l),t)),classes:{paper:Object(z.a)((n={},Object(U.a)(n,r.drawerOpen,l),Object(U.a)(n,r.drawerClose,!l),n))},children:[Object(a.jsx)("div",{className:r.toolbar,children:Object(a.jsx)(C.a,{onClick:function(){d(!1)},children:"rtl"===s.direction?Object(a.jsx)(q.a,{style:{color:"white"}}):Object(a.jsx)(X.a,{style:{color:"white"}})})}),Object(a.jsx)(M.a,{}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(M.a,{}),Object(a.jsx)("div",{style:{textAlign:"center",backgroundColor:"#29434e"},children:"Friends"}),Object(a.jsx)(M.a,{}),Object(a.jsx)(W.a,{children:["All mail","Trash","Spam"].map((function(e,t){return Object(a.jsxs)(Q.a,{button:!0,children:[Object(a.jsx)(Z.a,{className:r.list,children:t%2===0?Object(a.jsx)(te.a,{}):Object(a.jsx)(ae.a,{})}),Object(a.jsx)($.a,{primary:e})]},e)}))}),Object(a.jsx)(M.a,{}),Object(a.jsx)("div",{style:{textAlign:"center",backgroundColor:"#29434e"},children:"Rooms"}),Object(a.jsx)(M.a,{}),Object(a.jsxs)(W.a,{style:{overflow:"auto",height:"35%"},children:[Object(a.jsxs)(Q.a,{button:!0,onClick:function(){return e.handleNewChannelOpen()},children:[Object(a.jsx)(Z.a,{children:Object(a.jsx)(se.a,{})}),Object(a.jsx)($.a,{primary:"New Room"})]}),e.channels.map((function(t){return Object(a.jsxs)(Q.a,{button:!0,onClick:function(){return e.setChannel(t)},children:[Object(a.jsx)(Z.a,{className:r.list,children:Object(a.jsx)(te.a,{})}),Object(a.jsx)($.a,{primary:t.name})]},t.name)}))]}),Object(a.jsx)(M.a,{}),Object(a.jsx)("div",{style:{textAlign:"center",backgroundColor:"#29434e"},children:"Settings"}),Object(a.jsx)(M.a,{})]})]})},de=n(168),be=n.p+"static/media/loginbackground.47009031.png",je=Object(y.a)((function(e){return{label:{color:"black",width:"100%"},focusedLabel:{color:"black"},modal:{width:"30%",maxWidth:"100vw",maxHeight:"100%",position:"fixed",top:"25%",left:"35%",overflow:"auto",height:"50%",background:"whitesmoke",backgroundImage:"url(".concat(be,")"),backgroundSize:"auto",border:"3px solid white"}}})),ue=function(e){var t=je();return Object(a.jsx)("div",{className:t.modal,children:Object(a.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){e.createNewChannel(t)},children:Object(a.jsxs)(v.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,style:{margin:"1%"},direction:"row",children:Object(a.jsx)("img",{src:re,style:{width:"20%",marginLeft:"17px"},alt:"logo"})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(S.a,{placeholder:"",id:"standard-basic",label:"Room Name",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"3%",padding:"10px",paddingTop:"0"},children:Object(a.jsx)(V.a,{type:"submit",style:{background:"#2bbd7e"},children:"Make ChatRoom"})})]})})})},he=Object(d.a)({palette:{primary:{main:"#000000"},secondary:{main:"#000000"}}}),pe=Object(y.a)((function(e){return{root:{background:"#819ca9",margin:0,padding:0,border:0,maxHeight:"100%",height:window.innerHeight,flexGrow:1,display:"flex"},paper:{background:"#29434e",margin:5,padding:0,border:0},container:{width:"full",margin:0,padding:10,paddingLeft:20,paddingRight:20,border:0,align:"center"},form:{align:"center"},info:{background:"#819ca9"},chatSpace:{background:"#819ca9"},toolbar:Object(f.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:e.spacing(0,1)},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}})),me=function(e){var t="wss://stormy-savannah-56656.herokuapp.com/cable",n=pe(),c=Object(r.useState)([]),s=Object(u.a)(c,2),o=s[0],i=s[1],l=Object(r.useState)({channel:{},messages:[]}),d=Object(u.a)(l,2),j=d[0],h=d[1],p=function(e,t){var n=new WebSocket(e);return n.onopen=function(e){var a={id:t,channel:"ChannelChannel"},r=JSON.stringify({command:"subscribe",identifier:JSON.stringify(a)});n.send(r)},n},m=Object(r.useState)(!1),y=Object(u.a)(m,2),k=y[0],S=y[1],C=function(){S(!1)},F=function(e){var t=e.data,n=JSON.parse(t);"ping"!==n.type&&n.message&&h((function(e){return Object(f.a)(Object(f.a)({},e),{},{messages:[].concat(Object(O.a)(e.messages),[n.message.message_info])})}))},N=function(){var t=Object(x.a)(g.a.mark((function t(){var n,a,r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authentication:"Bearer ".concat(localStorage.getItem("token"))}},t.next=3,fetch("https://stormy-savannah-56656.herokuapp.com/login/user",n);case 3:return a=t.sent,t.next=6,a.json();case 6:r=t.sent,e.setCurrentUser(r.user);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=Object(x.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://stormy-savannah-56656.herokuapp.com/channels/".concat(localStorage.getItem("channelId")));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,h((function(e){return Object(f.a)(Object(f.a)({},e),{},{channel:n.channel,messages:n.message_info})}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){localStorage.getItem("token")&&N(),function(){var e=Object(x.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:console.log("ran");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),fetch("https://stormy-savannah-56656.herokuapp.com/channels").then((function(e){return e.json()})).then((function(e){i(e)}));var e=[13,14];e.map((function(n){return localStorage.setItem("channelId",e[0]),p(t,n).onmessage=function(e){F(e)},e}))}),[]),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(le,{handleNewChannelOpen:function(){S(!0)},handleLogout:function(){localStorage.removeItem("token"),e.setCurrentUser(null),e.setToken(!1)},channels:o,setChannel:function(e){p(t,e.id).onmessage=function(e){F(e)},localStorage.setItem("channelId",e.id),I()}}),Object(a.jsxs)("main",{className:n.content,children:[Object(a.jsx)("div",{className:n.toolbar}),Object(a.jsx)(w.a,{className:n.container,maxWidth:"xl",children:Object(a.jsx)(v.a,{container:!0,direction:"row",children:Object(a.jsx)(P,{classes:n,makeMessage:function(e){localStorage.getItem("token")?fetch("https://stormy-savannah-56656.herokuapp.com/messages",{method:"POST",headers:{"Content-Type":"application/json",Authentication:"bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({message:e,channel_id:localStorage.getItem("channelId")})}):alert("you need to sign in")},messages:j.messages,currentUser:e.currentUser,channel:j.channel})})})]}),Object(a.jsx)(de.a,{open:k,onClose:C,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)(b.a,{theme:he,children:Object(a.jsx)(ue,{createNewChannel:function(e){e.preventDefault(),fetch("https://stormy-savannah-56656.herokuapp.com/channels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.target[0].value})}).then((function(e){return e.json()})).then(function(){var e=Object(x.a)(g.a.mark((function e(n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("failed"!==n){e.next=4;break}alert("Could not create channel"),e.next=11;break;case 4:return p(t,n.id).onmessage=function(e){F(e)},e.next=8,i((function(e){return[].concat(Object(O.a)(e),[n])}));case 8:localStorage.setItem("channelId",n.id),I(),C();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}})})})]})},ge=Object(y.a)((function(e){return{label:{color:"black",width:"100%"},focusedLabel:{color:"black"},button:{"&:hover":{backgroundColor:"#2bbd7e",color:"white"}}}})),xe=function(e){var t=ge();return Object(a.jsx)("div",{className:e.classes.modal,style:{borderRadius:"10%"},children:Object(a.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){e.login(t)},children:Object(a.jsxs)(v.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,style:{margin:"1%"},direction:"row",children:Object(a.jsx)("img",{src:re,style:{width:"20%",marginLeft:"17px"},alt:"logo"})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(S.a,{placeholder:"",id:"standard-basic",label:"Username",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(S.a,{id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"3%",padding:"10px",paddingTop:"0"},children:Object(a.jsx)(V.a,{type:"submit",className:t.button,children:"Login"})})]})})})},Oe=Object(y.a)((function(e){return{label:{color:"black",width:"100%"},focusedLabel:{color:"#22d5db"},button:{"&:hover":{backgroundColor:"#22d5db",color:"black"}}}})),fe=function(e){var t=Oe();return Object(a.jsx)("div",{className:e.classes.modal,style:{borderRadius:"10%"},children:Object(a.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(t){e.signup(t)},children:Object(a.jsxs)(v.a,{container:!0,direction:"column",xs:12,children:[Object(a.jsx)(v.a,{container:!0,item:!0,xs:12,style:{margin:"1%"},direction:"row",children:Object(a.jsx)("img",{src:re,style:{width:"20%",marginLeft:"17px"},alt:"logo"})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(S.a,{placeholder:"",id:"standard-basic",label:"Username",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"1%",padding:"10px",paddingTop:"0px"},children:Object(a.jsx)(S.a,{id:"standard-password-input",label:"Password",type:"password",autoComplete:"current-password",InputLabelProps:{classes:{root:t.label,focused:t.focusedLabel}}})}),Object(a.jsx)(v.a,{item:!0,xs:12,style:{margin:"3%",padding:"10px",paddingTop:"0"},children:Object(a.jsx)(V.a,{type:"submit",className:t.button,children:"Signup"})})]})})})},ye=Object(d.a)({palette:{primary:{main:"#000000"},secondary:{main:"#000000"}}}),we=Object(y.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#29434e",color:"#FFFFFF"},list:{color:"white","&:hover":{color:"#29434e"}},login:{color:"#FFFFFF",backgroundColor:"#29434e","&:hover":{backgroundColor:"#2bbd7e"}},signUp:{color:"#FFFFFF",backgroundColor:"#29434e","&:hover":{backgroundColor:"#22d5db",color:"black"}},modal:{width:"30%",maxWidth:"100vw",maxHeight:"100%",position:"fixed",top:"25%",left:"35%",overflow:"auto",height:"50%",background:"whitesmoke",backgroundImage:"url(".concat(be,")"),backgroundSize:"auto",border:"3px solid white"}}})),ve=function(e){var t=we(),n=Object(r.useState)(!1),c=Object(u.a)(n,2),s=c[0],o=c[1],i=Object(r.useState)(!1),l=Object(u.a)(i,2),d=l[0],h=l[1],p=function(){o(!1)},m=function(){h(!1)};return Object(a.jsxs)("div",{children:[Object(a.jsx)(K.a,{position:"fixed",className:Object(z.a)(t.appBar),children:Object(a.jsxs)(H.a,{style:{justifyContent:"space-between"},children:[Object(a.jsx)(v.a,{container:!0,xs:5,direction:"row",children:Object(a.jsxs)(v.a,{item:!0,xs:3,direction:"column",children:[Object(a.jsx)(j.a,{variant:"inherit",style:{float:"left",fontSize:"18px",color:"#2bbd7e"},children:Object(a.jsx)("i",{children:"Kool"})}),Object(a.jsx)("img",{src:re,style:{width:"40%"},alt:"logo"}),Object(a.jsx)(j.a,{variant:"inherit",style:{fontSize:"18px",color:"#9bffff"},children:Object(a.jsx)("i",{children:"Khat"})})]})}),Object(a.jsxs)(v.a,{item:!0,children:[Object(a.jsx)(V.a,{onClick:function(){h(!0)},className:t.signUp,children:"Sign up"}),Object(a.jsx)(V.a,{onClick:function(){o(!0)},className:t.login,children:"Login"})]})]})}),Object(a.jsx)(de.a,{open:s,onClose:p,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)(b.a,{theme:ye,children:Object(a.jsx)(xe,{classes:t,login:e.login,handleLoginClose:p})})}),Object(a.jsx)(de.a,{open:d,onClose:m,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(a.jsx)(b.a,{theme:ye,children:Object(a.jsx)(fe,{classes:t,signup:e.signup,handleSignupClose:m})})})]})},ke=function(){var e=Object(r.useState)(localStorage.getItem("token")),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(null),o=Object(u.a)(s,2),i=o[0],l=o[1],d=function(e){e.preventDefault(),fetch("https://stormy-savannah-56656.herokuapp.com/login/".concat(e.target[0].value),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.target[0].value,password:e.target[1].value})}).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),l(e.user),c(localStorage.getItem("token"))}))},b=function(e){e.preventDefault();var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.target[0].value,password:e.target[1].value})};fetch("https://stormy-savannah-56656.herokuapp.com/users",t).then((function(e){return e.json()})).then((function(e){console.log(e),localStorage.setItem("token",e.token),l(e.user),c(localStorage.getItem("token"))}))},j=function(e){c(e)};return Object(a.jsx)(h.a,{children:Object(a.jsxs)(p.Switch,{children:[Object(a.jsx)(p.Route,{exact:!0,path:"/",render:function(){return n?Object(a.jsx)(p.Redirect,{to:"/khat"}):Object(a.jsx)(ve,{setToken:j,login:d,signup:b})}}),Object(a.jsx)(p.Route,{exact:!0,path:"/khat",render:function(){return n?Object(a.jsx)(me,{setToken:j,currentUser:i,setCurrentUser:l}):Object(a.jsx)(p.Redirect,{to:"/"})}})]})})},Se=Object(d.a)({typography:{h3:{textAlign:"center"}},palette:{primary:{main:"#2bbd7e"},secondary:{main:"#9fffe0"}},fontFamily:"roboto"});o.a.render(Object(a.jsxs)(b.a,{theme:Se,children:[Object(a.jsx)(j.a,{}),Object(a.jsx)(l.a,{basename:"/KoolKhat",children:Object(a.jsx)(ke,{})}),Object(a.jsx)(j.a,{})]}),document.getElementById("root"))},97:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.04b26c2d.chunk.js.map